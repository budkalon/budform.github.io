<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Handling</title>
    <style>
        .hidden { display: none; }
    </style>
	<!--<script>
		var terkirim = false;
	</script>-->
</head>
<body>

<!-- Form -->
<!--<iframe id="hiddenkont" name="hiddenkont" onload="if(terkirim){window.location='terima-kasih.html';}" style="display:none;"></iframe>-->
<form id="mainForm" action="https://docs.google.com/forms/d/e/1FAIpQLSft2R0WqMWlSfok7_cV19xo0UthC4zp01RVAIvrp1e3vXsUTA/formResponse" method="POST">

    <!-- DATA Group -->
    <fieldset id="dataGroup" class="form-group" aria-labelledby="dataGroupLabel">
		<legend id="dataGroupLabel"><h2>Data Pemesan</h2></legend>
        <div id="entry.199079934-container" class="quest quest-text">
				<h3 id="entry.199079934Label" class="input-header"><label for="entry.199079934">Nama</label></h3>
				<p id="entry.199079934Desc" class="input-desc">Mohon masukkan nama yang sesuai dengan bukti pembayaran nanti.</p>
            	<input aria-describedby="entry.199079934Desc" aria-labelledby="entry.199079934Label" autocomplete="name" type="text" name="entry.199079934" id="entry.199079934" placeholder="Nama Lengkap">
        </div>
        <div id="entry.603622722-container" class="quest quest-text">
				<h3 class="input-header">Email</h3>
				<p class="input-desc">Mohon masukkan email dengan benar.</p>
            	<input autocomplete="email" type="email" name="entry.603622722" id="entry.603622722" placeholder="email@email.com">
				<p class="input-desc">Mohon ulangi email.</p>
            	<input autocomplete="off" type="email" name="entry.1154729410" id="entry.1154729410" placeholder="email@email.com">
        </div>
        <div id="entry.368837724-container" class="quest quest-text">
				<h3 id="entry.368837724Label" class="input-header">WhatsApp</h3>
				<p id="entry.368837724Desc" class="input-desc">Mohon masukkan email dengan benar.</p>
            	<input aria-labelledby="entry.368837724Label" aria-describedby="entry.368837724Desc" autocomplete="tel" type="text" name="entry.368837724" id="entry.368837724" placeholder="6200000000000">
        </div>
        <div id="entry.1623915758-container" class="quest quest-text">
				<h3 class="input-header">Media Sosial</h3>
				<p class="input-desc">Mohon masukkan email dengan benar.</p>
            	<input autocomplete="on" type="text" name="entry.1623915758" id="entry.1623915758" placeholder="@username (Platform)">
        </div>
		<hr>
        <div id='entry.246909151-container' class="quest quest-produk">
				<h3 class="input-header">Produk</h3>
				<p class="input-desc">Mohon masukkan email dengan benar.</p>
            	<input type="number" name="entry.246909151" min="1" id="entry.246909151" value="1" placeholder="2">
        </div>
        <fieldset id='entry.1175112849-container' aria-labelledby="entry.1175112849Label" class="quest quest-radio">
			<legend id="entry.1175112849Label" class="input-header"><h3 class="input-header">Metode Pengambilan</h3></legend>
			<p class="input-desc">Mohon masukkan email dengan benar.</p>
            <label for='entry.1175112849_1' id="entry.1175112849_1Label" class="radiolabel">
                <input type="radio" name="entry.1175112849" id="entry.1175112849_1" value="kr">
				<span class="radio-label">Pengiriman</span>
            </label>
            <label for='entry.1175112849_2' class="radiolabel">
                <input type="radio" name="entry.1175112849" id="entry.1175112849_2" value="cf">
				<span class="radio-label">Comic Frontier</span>
            </label>
            <label for='entry.1175112849_3' class="radiolabel">
                <input type="radio" name="entry.1175112849" id="entry.1175112849_3" value="ps">
				<span class="radio-label">Pesta Komik Bandung</span>
            </label>
        </fieldset>
    </fieldset>

    <!-- KIRIM Group -->
    <fieldset id="kirimGroup" class="form-group hidden">
		<legend>Pengiriman</legend>
        <div id='entry.436673105-container' class="quest quest-radio">
			<h3 class="input-header">Apakah Nama Penerima Sama dengan Nama Pemesan?</h3>
			<p class="input-desc">Apakah Nama Penerima Sama dengan Nama Pemesan?</p>
            <label for='entry.436673105_1'>
                <input type="radio" name="entry.436673105" id="entry.436673105_1" value="TRUE">
				<span class="radio-label">Ya</span>
            </label>
            <label for='entry.436673105_2'>
                <input type="radio" name="entry.436673105" id="entry.436673105_2" value="FALSE">
				<span class="radio-label">Tidak</span>
            </label>
        </div>
        <div id='entry.1977903973-container' class="hidden quest quest-text">
				<h3 class="input-header">Nama Penerima</h3>
				<p class="input-desc">Mohon masukkan nama penerima.</p>
            <input type="text" name="entry.1977903973" id="entry.1977903973" placeholder="Nama Penerima">
        </div>
		<fieldset id="alamat-quest">
				<legend><h3 class="input-header">Alamat Pengiriman</h3></legend>
				<p class="input-desc">Mohon masukkan nama penerima.</p>
			<div id='entry.70877665-container' class="quest quest-text">
				<p class="input-desc">Jalan</p>
				<input autocomplete="address-line1" type="text" name="entry.70877665" id="entry.70877665" placeholder="Jl. Jalan Rumah no 01 RT/RW 01/02">
			</div>
			<div id='entry.721923077-container' class="quest quest-text">
				<p class="input-desc">Kecamatan</p>
				<input autocomplete="address-level3" type="text" name="entry.721923077" id="entry.721923077" placeholder="Kecamatan">
			</div>
			<div id='entry.2067142482-container' class="quest quest-text">
				<p class="input-desc">Kota</p>
				<input autocomplete="address-level2" type="text" name="entry.2067142482" id="entry.2067142482" placeholder="Kota/Kabupaten">
			</div>
			<div id='entry.398153844-container' class="quest quest-text">
				<p class="input-desc">Provinsi</p>
				<input autocomplete="address-level1" type="text" name="entry.398153844" id="entry.398153844" placeholder="Provinsi">
			</div>
			<div id='entry.277109060-container' class="quest quest-text">
				<p class="input-desc">Kode Pos</p>
				<input autocomplete="postal-code" type="text" name="entry.277109060" id="entry.277109060" placeholder="Kode Pos">
			</div>
		</fieldset>
        <div id='entry.291225708-container' class="quest quest-textarea">
				<h3 class="input-header">Patokan alamat</h3>
				<p class="input-desc">Mohon masukkan nama penerima.</p>
            <textarea autocomplete="on" name="entry.291225708" id="entry.291225708" placeholder="Rumah depan gang"></textarea>
        </div>
    </fieldset>

    <!-- AJANG Group -->
    <fieldset id="ajangGroup" class="form-group hidden">
		<legend>Pengambilan Ajang</legend>
        <div id='entry.50010751-container' class="quest quest-text">
				<h3 class="input-header">Kata Kunci</h3>
				<p class="input-desc">Mohon masukkan nama penerima.</p>
            <input autocomplete="on" type="text" name="entry.50010751" id="entry.50010751" placeholder="KATAKUNCI">
        </div>
    </fieldset>

    <!-- PESAN Group -->
    <fieldset id="pesanGroup" class="form-group hidden">
		<legend>Ringkasan dan Pesan</legend>
        <fieldset id='entry.1073892163-container' class="quest quest-radio">
			<legend><h3 class="input-header">Survey</h3></legend>
			<p class="input-desc">Apakah Nama Penerima Sama dengan Nama Pemesan?</p>
            <label for='entry.1073892163_1'>
                <input type="radio" name="entry.1073892163" id="entry.1073892163_1" value="1"> 1
            </label>
            <label for='entry.1073892163_2'>
                <input type="radio" name="entry.1073892163" id="entry.1073892163_2" value="2"> 2
            </label>
            <label for='entry.1073892163_3'>
                <input type="radio" name="entry.1073892163" id="entry.1073892163_3" value="3"> 3
            </label>
            <label for='entry.1073892163_4'>
                <input type="radio" name="entry.1073892163" id="entry.1073892163_4" value="4"> 4
            </label>
        </fieldset>
        <div id="entry.927780524-container" class="quest quest-textarea">
			<h3 class="input-header">Apakah Nama Penerima Sama dengan Nama Pemesan?</h3>
			<p class="input-desc">Apakah Nama Penerima Sama dengan Nama Pemesan?</p>
            <textarea name="entry.927780524" id="entry.927780524" placeholder="Pesan dan catatan tambahan"></textarea>
        </div>
    </fieldset>

    <!-- Pagination Buttons -->
    <button type="button" id="prevButton" class="hidden">Kembali</button>
    <button type="button" id="nextButton">Lanjut</button>
</form>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const form = document.getElementById("mainForm");
    const groups = ["dataGroup", "kirimGroup", "ajangGroup", "pesanGroup"];
    let currentStep = 0;
    let entryType = "";

    function showGroup(step) {
        groups.forEach((group, index) => {
            document.getElementById(group).classList.toggle("hidden", index !== step);
        });
        document.getElementById("prevButton").classList.toggle("hidden", step === 0);
        document.getElementById("nextButton").textContent = step === groups.length - 1 ? "Kirim" : "Lanjut";
    }

    function validateKirimGroup() {
        return [...form.querySelectorAll("#kirimGroup input")].every(input => input.value.trim() !== "");
    }

    function validateEmails() {
        const email = form.querySelector("#entry\\.603622722").value;
        const confirmEmail = form.querySelector("#entry\\.1154729410").value;
        return email === confirmEmail;
    }

    document.getElementById("nextButton").addEventListener("click", () => {
        if (currentStep === 0) {
            if (!validateEmails()) {
                alert("Emails do not match. Please confirm your email address.");
                return;
            }

            entryType = form.querySelector('input[name="entry.1175112849"]:checked')?.value;
            const krChecked = entryType === "kr";
            const psCfChecked = ["ps", "cf"].includes(entryType);

            if (krChecked) {
                currentStep++;
                form.querySelectorAll("#kirimGroup input").forEach(input => input.required = true);
            } else if (psCfChecked) {
                currentStep = 2;
                form.querySelectorAll("#ajangGroup input").forEach(input => input.required = true);
            }
        } else if (currentStep === 1) {
            if (validateKirimGroup()) {
                currentStep = 3; // Skip to PESAN group
            }
        } else if (currentStep === 2) {
            currentStep++;
        } else if (currentStep === groups.length - 1) {
            form.submit();
        } else {
            currentStep++;
        }

        showGroup(currentStep);
    });

    document.getElementById("prevButton").addEventListener("click", () => {
        if (currentStep > 0) {
            if (currentStep === 3) {
                // PESAN to KIRIM or AJANG
                currentStep = entryType === "kr" ? 1 : 2;
            } else if (currentStep === 2) {
                // AJANG to DATA
                currentStep = 0;
            } else if (currentStep === 1) {
                // KIRIM to DATA
                currentStep = 0;
            } else {
                currentStep--;
            }
            showGroup(currentStep);
        }
    });

    form.querySelectorAll('input[name="entry.436673105"]').forEach(input => {
        input.addEventListener("change", (event) => {
            const showEntry = event.target.value === "FALSE";
            const entryField = form.querySelector("#entry\\.1977903973-container");
            entryField.classList.toggle("hidden", !showEntry);

            if (!showEntry) {
                form.querySelector("#entry\\.1977903973").value = form.querySelector("#entry\\.199079934").value;
            }
        });
    });

    showGroup(currentStep);
});

</script>
</body>
</html>
